<%- include("../partials/navbar") %>
<br>
<br>
<br>

<div class="container">
    <div class="card">
        <div class="card-body">
            <br>
            <% if (projectMessage.length > 0) {%>
            <div class="alert alert-danger" role="alert">
                <%= projectMessage %>
            </div>
            <% } %>
            <div class="container-fluid">
                <h2><%= title %></h2>
                <hr>


                <form class="signInForm" method="POST">
                    <div class="form-group row">
                        <label for="nameproject" class="col-sm-2 col-form-label">Name</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" id="nameproject" name="editname"
                                placeholder="Project Name" value="<%= project.name %>">
                        </div>
                    </div>

                    <div class="form-group row ">
                        <div class="col-sm-2">Members</div>
                        <div class="col-sm-10">
                            <% dataUser.forEach((item, index) => { %>
                            <div class="form-check">
                                <input class="form-check-input" id="check<%= index + 1 %>" type="checkbox"
                                    name="editmember" value="<%= item.userid %>, '<%= item.position %>'"
                                    <%= dataMembers.includes(item.userid) ? 'checked' : '' %>>
                                <label class="form-check-label" for="check<%= index + 1 %>">
                                    <%= item.firstname %> <%= item.lastname %>
                                </label>
                            </div>
                            <% }) %>
                        </div>
                    </div>

            </div>

            <div class="form-group row">
                <div class="col-sm-10">
                    <button type="submit" class="btn btn-dark my-2 my-sm-0">Update</button>
                    <a class="btn btn-dark my-2 my-sm-0" href="/projects" role="button">Back</a>
                </div>
            </div>
            </form>
        </div>

    </div>

    <script>

        // On clicking submit do following 
        $("input[type=submit]").click(function () {

            var atLeastOneChecked = false;
            $("input[type=checkbox]").each(function () {

                // If radio button not checked 
                // display alert message  
                if ($(this).attr("checked") != "checked") {

                    // Alert message by displaying 
                    // error message 
                    $("#msg").html(
                        "<span class='alert alert-danger' id='error'>"
                        + "Members Tidak Boleh Kosong</span>");
                }
            });
        }); 
    </script>

    <%- include("../partials/footer") %>
